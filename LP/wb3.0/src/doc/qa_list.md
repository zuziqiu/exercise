## WHITEBOARD-QA

### 前期制定规范 & 讨论架构方 找解决思路
	画板的前身，前期准备均没产品加入讨论具体产品细节，程序员参考旧版直播器模仿开发。
	导致开发过程中环节细节遗漏较多，产生以下问题

- `颜色问题`
	- 问题：颜色转化需要用10进制，透明度需要用RGBA => HEX / HEX => RGBA等
	- 解决：通过沟通 & canvas库特性 写转化函数解决问题
	
- `历史处理(Hao)`
	- 保存历史数据
	 	- 问题：前期没考虑周全，历史层级处理不准确
		- 解决：把画板和PPT以及子页进行分类处理
	- 前进
		- 问题：客户端与网页操作逻辑不同，无法直接操作
		- 解决：新增客户端方法进行dispatch触发动作
	- 后退
		- 问题：客户端与网页操作逻辑不同，无法直接操作
		- 解决：新增客户端方法进行dispatch触发动作
- `翻页处理`
	- 子页处理通过一个数组拼接方式达到快速翻页
	- 大页翻页涂鸦需要重新渲染
- `特殊尺寸处理`
	- PDF滚动思路梳理
- `缩放处理`
	- 4:3 / 16:9 / 其他尺寸兼容
- `涂鸦数据如何封装&设计`
	- 问题：这个数据库(状态树)设计是一个抽象层，没有前期的讨论&参考资料无法开发
	- 回答：通过参考之前小班的产品&旧直播器，画出了一个xmind架构图解决，但还是有不足的地方，后面开发应先理顺这层架构,对于后面的开发有深远的影响
- `指令组装`
	- 每一种图形 & 画笔均有不同程度的差异化cdata（cmd）模版
	- 通过抽离一些共性形成模块化体系，从而高效内部调用
- `发送指令规则`
	- 问题：有些指令比较特殊，例如翻页需要发送3条指令，前期开发没考虑，导致观看端错误，不翻页涂鸦异常等
	- 解决：跟啊飞沟通后，需要按顺序发送 ［1，2，3］指令，解决问题
- `webCommand <=> JS 传输规范`
	- 问题：qt如何执行js / js 如何执行 qt
	- 解决：通过中间件 => 执行js函数(指令,数据)形式执行, 反之在QtWebEngine里有个window.qt变量，提供一些方法供给js传输数据给webview

- `擦除数据处理(Hao)`
	- 问题：原本擦除后，是直接删除对象，前进后退无效
	- 解决：后退前进的数据需要把cData重新解析visiable出来转换再存储进去
- `ppt滚动(Hao)`
	- 问题：不同尺寸的ppt如何适应滚动
	- 解决：计算出缩放尺寸以及监听滚动