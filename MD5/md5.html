<!DOCTYPE html>
<html>
    <head>
        <title>SparkMD5 file reader test</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <!-- <link rel="stylesheet" href="css/bootstrap-1.4.min.css"> -->
        <script src="./md5.js" type="text/javascript"></script>

        <style type="text/css" media="screen">
            .alert-message {
                margin-bottom: 5px;
            }
            input.input-file {
                padding: 5px;
                margin-right: 25px;
                background-color: transparent;
                line-height: 1;
                vertical-align: middle;
            }
        </style>
    </head>
    <body class="container">
        <div class="actions">
            <input type="file" id="file" class="input-file span5"/>
            <input type="button" id="normal" value="Normal" class="btn primary"/>
        </div>
        <div id="log"></div>

        <script type="text/javascript">
            var input = document.getElementById('file');
            
            function doNormalTest() {
                var fileReader = new FileReader(),
                    file = input.files[0];
                fileReader.onload = function (e) {
                    running = false;
                    if (file.size != e.target.result.byteLength) {
                       
                    } else {
                        console.warn(SparkMD5.ArrayBuffer.hash(e.target.result))
                    }
                };
                fileReader.onerror = function () {
                    running = false;
                   
                };
                running = true;
                fileReader.readAsArrayBuffer(file);
            }

            document.getElementById('normal').addEventListener('click', doNormalTest);
        </script>
    </body>
</html>